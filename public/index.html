<!DOCTYPE html>
<html>
<head>
  <style>
    /* 스타일링을 위한 CSS */
    #container {
      display: flex;
    }
    #left-container {
      position: relative;
      width: 400px;
      height: 400px;
      border: 1px solid black;
      overflow: hidden; /* 컨테이너 내에서 벗어나지 않도록 */
    }
    #right-container {
      width: 200px;
      padding: 10px;
    }
    .cat {
      position: absolute;
      width: 50px;
      height: 50px;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="left-container"></div>
    <div id="right-container">
      <button id="createCatButton">고양이 생성</button>
      <button id="speedButton">속도 조절</button>
    </div>
  </div>
  <script>
    const leftContainer = document.getElementById('left-container');
    const createCatButton = document.getElementById('createCatButton');
    const speedButton = document.getElementById('speedButton');
    let cat = null;
    let speedMultiplier = 1;

    createCatButton.addEventListener('click', () => {
      if (cat) {
        leftContainer.removeChild(cat);
      }
      const randomX = Math.random() * (leftContainer.offsetWidth - 50);
      const randomY = Math.random() * (leftContainer.offsetHeight - 50);
      cat = createCat(randomX, randomY);
    });

    speedButton.addEventListener('click', () => {
      speedMultiplier *= 2;
      if (speedMultiplier > 4) {
        speedMultiplier = 1;
      }
    });

    leftContainer.addEventListener('mousedown', (e) => {
      if (cat) {
        const catRect = cat.getBoundingClientRect();
        const centerX = catRect.width / 2;
        const centerY = catRect.height / 2;
        let x = e.clientX - leftContainer.getBoundingClientRect().left - centerX;
        let y = e.clientY - leftContainer.getBoundingClientRect().top - centerY;
        
        // 컨테이너 경계 안으로 제한
        x = Math.max(centerX, Math.min(leftContainer.offsetWidth - centerX, x));
        y = Math.max(centerY, Math.min(leftContainer.offsetHeight - centerY, y));
        
        moveCat(cat, x, y);
      }
    });

    function createCat(x, y) {
      const cat = document.createElement('img');
      cat.src = './movingcat.gif'; // 고양이 이미지 경로
      cat.className = 'cat';
      leftContainer.appendChild(cat);
      cat.style.left = x + 'px';
      cat.style.top = y + 'px';
      return cat;
    }

    function moveCat(cat, x, y) {
      const catRect = cat.getBoundingClientRect();
      const centerX = catRect.width / 2;
      const centerY = catRect.height / 2;
      
      // 컨테이너 경계 안으로 제한
      x = Math.max(centerX, Math.min(leftContainer.offsetWidth - centerX, x));
      y = Math.max(centerY, Math.min(leftContainer.offsetHeight - centerY, y));

      const deltaX = x - (catRect.left + centerX);
      const deltaY = y - (catRect.top + centerY);
      const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);

      const duration = (distance / 100) / speedMultiplier;

      cat.style.transition = `left ${duration}s, top ${duration}s`;
      cat.style.left = x - centerX + 'px';
      cat.style.top = y - centerY + 'px';
    }
  </script>
  </script>
</body>
</html>
